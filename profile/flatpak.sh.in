# @sysconfdir@/profile.d/flatpak.sh - set XDG_DATA_DIRS

if [ "${XDG_DATA_DIRS#*flatpak}" = "${XDG_DATA_DIRS}" ]; then
    OLD_XDG_DATA_DIRS=${XDG_DATA_DIRS}
    XDG_DATA_DIRS="${XDG_DATA_HOME:-"$HOME/.local/share"}/flatpak/exports/share"
    while read install_path
    do
        XDG_DATA_DIRS="${XDG_DATA_DIRS}:$install_path/exports/share"
    done < <(flatpak --list-installations)
    XDG_DATA_DIRS="${XDG_DATA_DIRS}:${OLD_XDG_DATA_DIRS:-/usr/local/share:/usr/share}"
fi

export XDG_DATA_DIRS
